fragment UserSummary on User {
  id
  firstname
  lastname
  email
}

fragment User on User {
  ...UserSummary
  role
  phoneNumber
  discount
  notes
}

fragment Customer on User {
  ...User
  createdAt
  booksInStock
  booksSold
  booksReserved
  booksRequested
  booksRequestedAndAvailable: booksRequested(onlyAvailable: true)
  booksBought
  booksInCart(retailLocationId: $retailLocationId)
}

query getUsers($page: Int!, $rowsPerPage: Int!) {
  users(page: $page, rowsPerPage: $rowsPerPage, roles: [ADMIN, OPERATOR]) {
    page
    rowsCount
    rows {
      ...User
    }
  }
}

query getCustomers(
  $page: Int!
  $rowsPerPage: Int!
  $retailLocationId: String!
) {
  users(page: $page, rowsPerPage: $rowsPerPage, roles: [USER]) {
    page
    rowsCount
    rows {
      ...Customer
    }
  }
}

mutation removeUser($input: RemoveUserPayload!) {
  removeUser(input: $input)
}

mutation updateRole($input: UpdateRolePayload!) {
  updateRole(input: $input)
}
