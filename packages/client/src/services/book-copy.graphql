fragment ProblemDetails on Problem {
  id
  createdAt
  createdBy {
    ...UserSummary
  }
  details
  resolvedAt
  resolvedBy {
    ...UserSummary
  }
  solution
  type
  updatedAt
}

fragment BookCopyDetails on BookCopy {
  id
  createdAt
  createdById
  code
  book {
    ...BookSummary
    retailLocationId
  }
  problems {
    ...ProblemDetails
  }
  purchasedAt
  purchasedBy {
    ...UserSummary
  }
  owner {
    ...UserSummary
  }
  returnedAt
  returnedById
  updatedAt
  updatedById
}

query getBookCopies($bookId: String!) {
  bookCopies(bookId: $bookId) {
    ...BookCopyDetails
  }
}

query getBookCopiesByOwner($userId: String!) {
  bookCopiesByOwner(userId: $userId) {
    ...BookCopyDetails
  }
}

query getPurchasedBookCopies($userId: String!) {
  purchasedBookCopies(userId: $userId) {
    ...BookCopyDetails
  }
}

query getSoldBookCopies($userId: String!) {
  soldBookCopies(userId: $userId) {
    ...BookCopyDetails
  }
}

query getReturnedBookCopies($userId: String!) {
  returnedBookCopies(userId: $userId) {
    ...BookCopyDetails
  }
}

mutation createBookCopies($input: BookCopyCreateInput!) {
  createBookCopies(input: $input)
}

mutation reportProblem($input: ProblemCreateInput!) {
  reportProblem(input: $input) {
    id
    bookCopyId
    details
  }
}

mutation resolveProblem($input: ProblemResolveInput!) {
  resolveProblem(input: $input) {
    id
    bookCopyId
    details
    solution
  }
}
