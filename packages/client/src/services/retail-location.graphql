fragment Theme on Theme {
  logo
  colors {
    primary
    secondary
    accent
  }
}

fragment RetailLocationSettings on RetailLocation {
  buyRate
  sellRate
  payOffEnabled
  maxBookingDays
  warehouseMaxBlockSize
}

fragment RetailLocation on RetailLocation {
  id
  name
  fullAddress
  phoneNumber
  instagramLink
  facebookLink
  infoPagesContent

  ...RetailLocationSettings

  theme {
    ...Theme
  }
}

query getRetailLocations {
  retailLocations {
    ...RetailLocation
  }
}

mutation updateRetailLocationTheme($input: UpdateRetailLocationThemeInput!) {
  updateRetailLocationTheme(input: $input) {
    ...RetailLocation
  }
}

mutation updateRetailLocationSettings(
  $input: UpdateRetailLocationSettingsInput!
) {
  updateRetailLocationSettings(input: $input) {
    id # include the id so that the cache gets updated automatically
    ...RetailLocationSettings
  }
}

fragment StatisticsQueryResult on StatisticsQueryResult {
  totalUsers
  totalSoldBooks
  totalRevenue
  totalReservedBooks
  totalRequestedBooks
  totalPresentBooks
  totalBooksWithProblems
  settledTotal
  settleableTotal
}

query retailLocationStatistics($retailLocationId: String!) {
  retailLocationStatistics(retailLocationId: $retailLocationId) {
    ...StatisticsQueryResult
  }
}

mutation resetRetailLocation($input: ResetRetailLocationInput!) {
  resetRetailLocation(input: $input)
}
